<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TodoListApp1.Page.CompletedTaskPage"
             BackgroundColor="White"
             Title="Completed Tasks">

    <AbsoluteLayout>
        <!-- Background Graphics -->
        <BoxView Color="#8FE1D7" Opacity="0.4" CornerRadius="100" WidthRequest="150" HeightRequest="150" 
                 AbsoluteLayout.LayoutBounds="1,1.06,10,200" AbsoluteLayout.LayoutFlags="PositionProportional" BackgroundColor="Transparent"/>
        <BoxView Color="#8FE1D7" Opacity="0.4" CornerRadius="100" WidthRequest="150" HeightRequest="150" 
                 AbsoluteLayout.LayoutBounds="0.80,1.15,10,200" AbsoluteLayout.LayoutFlags="PositionProportional" BackgroundColor="Transparent"/>
        <BoxView Color="#8FE1D7" Opacity="0.4" CornerRadius="100" WidthRequest="150" HeightRequest="150" 
                 AbsoluteLayout.LayoutBounds="0.010,-0.05,10,200" AbsoluteLayout.LayoutFlags="PositionProportional" BackgroundColor="Transparent"/>
        <BoxView Color="#8FE1D7" Opacity="0.4" CornerRadius="100" WidthRequest="150" HeightRequest="150" 
                 AbsoluteLayout.LayoutBounds="0.2,-0.15,10,200" AbsoluteLayout.LayoutFlags="PositionProportional" BackgroundColor="Transparent"/>

        <!-- Main Content (StackLayout and CollectionView) -->
        <Grid AbsoluteLayout.LayoutBounds="0, 0, 1, 1" AbsoluteLayout.LayoutFlags="All">
            <StackLayout Padding="20" Spacing="10">
                <!-- Page Header -->
                <Label Text="Completed Tasks"
                       FontSize="32"
                       FontFamily="PoppinsExtraBold"
                       HorizontalOptions="Center"
                       FontAttributes="Bold"
                       TextColor="Gray"/>
                <BoxView HeightRequest="2" Color="LightGray" Margin="20,0"/>

                <!-- Collection View for Displaying Completed Tasks -->
                <CollectionView x:Name="CompletedList" ItemsSource="{Binding CompletedItems}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Stroke="#DDD"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 10"
                                    BackgroundColor="#E6E6E6"
                                    Margin="0,5"
                                    Padding="10">
                                <Grid ColumnDefinitions="*,Auto,Auto" VerticalOptions="Center">
                                    <!-- Task Title -->
                                    <Label Text="{Binding Title}" FontAttributes="Bold" VerticalOptions="Center" TextColor="Black">
                                        <Label.GestureRecognizers>
                                            <TapGestureRecognizer/>
                                        </Label.GestureRecognizers>
                                    </Label>
                                    <!-- Undo Button -->
                                    <ImageButton Source="undo_icon.png"
                                                 Grid.Column="1"
                                                 BackgroundColor="Transparent"
                                                 Scale="0.5"
                                                 WidthRequest="25"
                                                 HeightRequest="25"
                                                 Clicked="OnUndoClicked"/>
                                    <!-- Delete Button -->
                                    <ImageButton Source="trash_icon.png"
                                                 Grid.Column="2"
                                                 BackgroundColor="Transparent"
                                                 Scale="0.5"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>
        </Grid>
    </AbsoluteLayout>
</ContentPage>
